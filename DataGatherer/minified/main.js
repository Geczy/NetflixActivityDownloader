javascript:function getJSON(e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){try{var e=JSON.parse(i.responseText)}catch(e){return alert("Netflix Stats gathering failed, see console for details"),void console.warn(e.message+" in "+i.responseText)}t(e)}},i.open("GET",e,!0),i.send()}function downloadJSONToFile(e,t){e=JSON.stringify(e);var i=document.createElement("a"),s=new Blob([e],{type:"application/json"});i.href=URL.createObjectURL(s),i.download=t,i.click()}var flixInfo=window.netflix.reactContext.models.serverDefs.data,userInfo=window.netflix.reactContext.models.userInfo.data,activityURL=flixInfo.SHAKTI_API_ROOT+"/"+flixInfo.BUILD_IDENTIFIER+"/viewingactivity?authURL="+userInfo.authURL+"&pgSize=100&pg=";console.log("using URL: "+activityURL);var flixStats={viewedItems:{},userDetails:{name:userInfo.name,guid:userInfo.guid,countryOfSignup:userInfo.countryOfSignup,currentCountry:userInfo.currentCountry,currentRegion:userInfo.currentRegion,membershipStatus:userInfo.membershipStatus,isInFreeTrial:userInfo.isInFreeTrial,isKids:userInfo.isKids}},pageCount=0;function gatherWatchInfo(e){console.log("\nGetting: "+activityURL+pageCount),getJSON(activityURL+pageCount,t=>{if(void 0===t.viewedItems[0])console.log("No viewed items in page\n\nFinished gathering pages"),e();else{for(var i=0;i<t.viewedItems.length;i++){var s,n=t.viewedItems[i],o="unknown",a="series";if(n.seriesTitle?(o=n.seriesTitle,s=n.series):(a="film",o=n.videoTitle,s=n.movieID),"series"==a)var r={title:n.title,dateWatched:n.dateStr,duration:n.duration};flixStats.viewedItems[s]?(flixStats.viewedItems[s].watchCount++,flixStats.viewedItems[s].watchedEpisodes[n.movieID]=r):(flixStats.viewedItems[s]={},flixStats.viewedItems[s].title=o,flixStats.viewedItems[s].type=a,"series"==a?(flixStats.viewedItems[s].watchCount=1,flixStats.viewedItems[s].watchedEpisodes={[n.movieID]:r}):(flixStats.viewedItems[s].dateWatched=n.dateStr,flixStats.viewedItems[s].duration=n.duration)),console.log("Parsed: "+o)}pageCount++,gatherWatchInfo(e)}})}gatherWatchInfo(()=>{console.log("\nDone\n"),console.log(flixStats),downloadJSONToFile(flixStats,"Netflix-Stats.json")});void 0